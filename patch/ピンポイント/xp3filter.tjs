var bitmap = <%
	00 01 01 02 01 02 02 03 01 02 02 03 02 03 03 04
	01 02 02 03 02 03 03 04 02 03 03 04 03 04 04 05
	01 02 02 03 02 03 03 04 02 03 03 04 03 04 04 05
	02 03 03 04 03 04 04 05 03 04 04 05 04 05 05 06
	01 02 02 03 02 03 03 04 02 03 03 04 03 04 04 05
	02 03 03 04 03 04 04 05 03 04 04 05 04 05 05 06
	02 03 03 04 03 04 04 05 03 04 04 05 04 05 05 06
	03 04 04 05 04 05 05 06 04 05 05 06 05 06 06 07
	01 02 02 03 02 03 03 04 02 03 03 04 03 04 04 05
	02 03 03 04 03 04 04 05 03 04 04 05 04 05 05 06
	02 03 03 04 03 04 04 05 03 04 04 05 04 05 05 06
	03 04 04 05 04 05 05 06 04 05 05 06 05 06 06 07
	02 03 03 04 03 04 04 05 03 04 04 05 04 05 05 06
	03 04 04 05 04 05 05 06 04 05 05 06 05 06 06 07
	03 04 04 05 04 05 05 06 04 05 05 06 05 06 06 07
	04 05 05 06 05 06 06 07 05 06 06 07 06 07 07 00 %>;
Storages.setXP3ArchiveExtractionFilter(function(hash, offset, buf/*xp3buffer*/, len) {
	var bitmap = global.bitmap;
	for (var i = 0; i < len; ++i) {
		var c = buf[i];
		var rol = bitmap[c];
		var ror = 8 - rol;
		buf[i] = (c << rol) | (c >> ror);
	}
});